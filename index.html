<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Goorm ê³¼ì œ ì €ì¥ì†Œ - FE 09</title>
    <style>
      :root {
        --primary: #006241;
        --bg: #f8f9fa;
      }
      body {
        font-family: "Pretendard", sans-serif;
        background: var(--bg);
        margin: 0;
        padding: 40px 20px;
        color: #333;
      }
      .container {
        max-width: 700px;
        margin: 0 auto;
      }
      header {
        text-align: center;
        margin-bottom: 40px;
      }

      .date-section {
        margin-bottom: 25px;
      }
      .date-title {
        font-size: 1.1rem;
        font-weight: 800;
        color: var(--primary);
        margin-bottom: 12px;
        border-bottom: 2px solid #eee;
        padding-bottom: 5px;
      }

      .task-card {
        background: white;
        padding: 15px 20px;
        margin-bottom: 8px;
        border-radius: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-decoration: none;
        color: inherit;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
        transition: 0.2s;
      }
      .task-card:hover {
        transform: translateX(8px);
        background: #fdfdfd;
        border-left: 5px solid var(--primary);
      }

      /* ìë™ íƒœê·¸ ìŠ¤íƒ€ì¼ */
      .tag {
        font-size: 0.65rem;
        padding: 3px 8px;
        border-radius: 4px;
        font-weight: 800;
        margin-right: 12px;
      }
      .tag.quiz {
        background: #fff5b1;
        color: #856404;
        border: 1px solid #ffeeba;
      } /* í€´ì¦ˆ: ë…¸ë€ìƒ‰ */
      .tag.project {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      } /* í”„ë¡œì íŠ¸: í•˜ëŠ˜ìƒ‰ */
      .tag.study {
        background: #e2e3e5;
        color: #383d41;
        border: 1px solid #d6d8db;
      } /* ê¸°ì´ˆ/ê³µë¶€: íšŒìƒ‰ */
      .tag.main {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      } /* ë©”ì¸/í´ë¡ : ì´ˆë¡ìƒ‰ */

      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-top: 30px;
      }
      .page-btn {
        padding: 8px 16px;
        cursor: pointer;
        border-radius: 20px;
        border: 1px solid #ddd;
        background: white;
      }
      .page-btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
      }
      .loader {
        text-align: center;
        padding: 50px;
        color: #aaa;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸ“‚ Goorm ê³¼ì œ ì•„ì¹´ì´ë¸Œ</h1>
      </header>

      <div id="loader" class="loader">ê³¼ì œ ë°ì´í„°ë¥¼ ë¶„ì„ ì¤‘...</div>
      <div id="task-container"></div>

      <div class="pagination">
        <button id="prev-btn" class="page-btn">ì´ì „</button>
        <span id="page-info" style="font-weight: bold">1 / 1</span>
        <button id="next-btn" class="page-btn">ë‹¤ìŒ</button>
      </div>
    </div>

    <script>
      let groups = {};
      let sortedDates = [];
      let curPage = 1;
      const perPage = 5;

      async function fetchAndTag() {
        const owner = "khy0819";
        const repo = "Goormexp";
        const apiUrl = `https://api.github.com/repos/${owner}/${repo}/git/trees/main?recursive=1`;

        try {
          const res = await fetch(apiUrl);
          const data = await res.json();
          const indexFiles = data.tree.filter(
            (f) =>
              f.path.includes("ê³¼ì œ/") &&
              f.path.endsWith("index.html") &&
              f.path !== "index.html",
          );

          indexFiles.forEach((f) => {
            const pathParts = f.path.split("/");
            const folderName = pathParts[1]; // ì˜ˆ: "0107_html_quiz"

            let dateKey = folderName;
            if (folderName.match(/\d+/)) {
              const num = folderName.match(/\d+/)[0];
              dateKey = `2026.01.${num.slice(-2)}`;
            }

            if (!groups[dateKey]) groups[dateKey] = [];
            groups[dateKey].push(f);
          });

          sortedDates = Object.keys(groups).sort((a, b) => a.localeCompare(b)); // ì˜¤ë˜ëœ ìˆœ
          document.getElementById("loader").style.display = "none";
          render();
        } catch (e) {
          document.getElementById("loader").innerText = "ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨";
        }
      }

      function render() {
        const container = document.getElementById("task-container");
        container.innerHTML = "";

        const start = (curPage - 1) * perPage;
        const keys = sortedDates.slice(start, start + perPage);

        keys.forEach((date) => {
          const section = document.createElement("div");
          section.className = "date-section";
          section.innerHTML = `<div class="date-title">${date}</div>`;

          groups[date].forEach((f) => {
            const folderName = f.path.split("/").slice(-2, -1)[0].toLowerCase();

            // --- ìë™ íƒœê¹… ë¡œì§ ì‹œì‘ ---
            let tagText = "STUDY";
            let tagClass = "study";

            if (folderName.includes("quiz")) {
              tagText = "QUIZ";
              tagClass = "quiz";
            } else if (
              folderName.includes("starbucks") ||
              folderName.includes("clone")
            ) {
              tagText = "PROJECT";
              tagClass = "main";
            } else if (
              folderName.includes("assignment") ||
              folderName.includes("task")
            ) {
              tagText = "TASK";
              tagClass = "project";
            }
            // --- ìë™ íƒœê¹… ë¡œì§ ë ---

            section.innerHTML += `
                    <a href="${f.path}" class="task-card">
                        <div><span class="tag ${tagClass}">${tagText}</span><strong>${folderName}</strong></div>
                        <span style="color:#ccc">â€º</span>
                    </a>`;
          });
          container.appendChild(section);
        });

        const total = Math.ceil(sortedDates.length / perPage);
        document.getElementById("page-info").innerText =
          `${curPage} / ${total || 1}`;
        document.getElementById("prev-btn").disabled = curPage === 1;
        document.getElementById("next-btn").disabled =
          curPage === total || total === 0;
      }

      document.getElementById("prev-btn").onclick = () => {
        if (curPage > 1) {
          curPage--;
          render();
          window.scrollTo(0, 0);
        }
      };
      document.getElementById("next-btn").onclick = () => {
        if (curPage < Math.ceil(sortedDates.length / perPage)) {
          curPage++;
          render();
          window.scrollTo(0, 0);
        }
      };

      fetchAndTag();
    </script>
  </body>
</html>
