<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Goorm ê³¼ì œ ì €ì¥ì†Œ | íƒ€ì„ë¼ì¸</title>

    <meta
      name="description"
      content="êµ¬ë¦„ KDT ê³¼ì •ì˜ ì—¬ì •ì„ ê¸°ë¡í•˜ëŠ” ì›¹ ì•„ì¹´ì´ë¸Œì…ë‹ˆë‹¤."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://khy0819.github.io/Goormexp/" />
    <meta property="og:title" content="WEB ARCHIVE | ì˜¤ëŠ˜ë„ ì½”ë”© ì¤‘!" />
    <meta
      property="og:image"
      content="https://khy0819.github.io/Goormexp/assets/og-image.png"
    />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>â˜ï¸</text></svg>"
    />

    <style>
      /* í°íŠ¸ ì„¤ì • */
      @font-face {
        font-family: "11StreetGothic";
        src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/2601-4@1.1/11StreetGothic-KorLight.woff2")
          format("woff2");
        font-weight: 300;
        font-display: swap;
      }
      @font-face {
        font-family: "11StreetGothic";
        src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/2601-4@1.1/11StreetGothic-Kor.woff2")
          format("woff2");
        font-weight: 400;
        font-display: swap;
      }
      @font-face {
        font-family: "11StreetGothic";
        src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/2601-4@1.1/11StreetGothic-KorBold.woff2")
          format("woff2");
        font-weight: 700;
        font-display: swap;
      }

      /* ë³€ìˆ˜ ì„¤ì • (ë‹¤í¬ëª¨ë“œ ëŒ€ì‘) */
      :root {
        --primary: #006241;
        --secondary: #e8f5e9;
        --bg: #f8f9fa;
        --accent: #ffeb3b;
        --card-bg: #ffffff;
        --text-main: #333333;
        --text-sub: #888888;
        --border: #eeeeee;
        --cloud-color: #ffffff;
      }

      [data-theme="dark"] {
        --primary: #4caf50;
        --secondary: #1b2e21;
        --bg: #121212;
        --accent: #ffd600;
        --card-bg: #1e1e1e;
        --text-main: #e0e0e0;
        --text-sub: #aaaaaa;
        --border: #333333;
        --cloud-color: #2c2c2c;
      }

      body {
        font-family: "11StreetGothic", "Pretendard", sans-serif;
        background: var(--bg);
        margin: 0;
        padding: 40px 20px;
        color: var(--text-main);
        transition:
          background 0.3s,
          color 0.3s;
      }

      .container {
        max-width: 750px;
        margin: 0 auto;
      }

      /* ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ */
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        padding: 10px;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        font-size: 1.2rem;
      }

      header {
        text-align: center;
        margin-bottom: 50px;
      }
      header h1 {
        color: var(--primary);
        font-size: 2.8rem;
        margin-bottom: 8px;
        font-weight: 700;
      }
      header p {
        color: var(--text-sub);
        font-weight: 300;
      }

      /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
      .loader-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 120px 0;
      }
      .cloud {
        width: 120px;
        height: 50px;
        background: var(--cloud-color);
        border-radius: 50px;
        position: relative;
        animation: float 2s ease-in-out infinite;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
      }
      .cloud::after,
      .cloud::before {
        content: "";
        position: absolute;
        background: var(--cloud-color);
        border-radius: 50%;
      }
      .cloud::after {
        width: 60px;
        height: 60px;
        top: -30px;
        left: 20px;
      }
      .cloud::before {
        width: 50px;
        height: 50px;
        top: -25px;
        right: 20px;
      }

      .eyes {
        position: absolute;
        width: 40px;
        height: 10px;
        top: 15px;
        left: 40px;
        z-index: 10;
        display: flex;
        justify-content: space-between;
      }
      .eye {
        width: 6px;
        height: 6px;
        background: var(--text-main);
        border-radius: 50%;
        animation: blink 3s infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }
      @keyframes blink {
        0%,
        90%,
        100% {
          transform: scaleY(1);
        }
        95% {
          transform: scaleY(0.1);
        }
      }

      .loading-text {
        margin-top: 35px;
        color: var(--primary);
        font-weight: 700;
      }

      /* ì•„ì½”ë””ì–¸ ë° ì¹´ë“œ ìŠ¤íƒ€ì¼ */
      details {
        background: var(--card-bg);
        margin-bottom: 20px;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.04);
        transition: transform 0.3s;
      }
      details:hover {
        transform: translateY(-3px);
      }
      summary {
        padding: 24px 28px;
        font-weight: 700;
        cursor: pointer;
        list-style: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      details[open] summary {
        background: var(--secondary);
        color: var(--primary);
        border-bottom: 1px solid var(--border);
      }

      .task-list {
        padding: 5px 15px 20px;
      }
      .task-card {
        display: flex;
        align-items: center;
        padding: 18px 20px;
        text-decoration: none;
        color: var(--text-main);
        margin-bottom: 8px;
        border-radius: 15px;
        transition: 0.2s;
      }
      .task-card:hover {
        background: var(--bg);
        color: var(--primary);
        transform: scale(1.02);
      }

      .tag {
        width: 60px;
        text-align: center;
        font-size: 0.7rem;
        padding: 4px 0;
        border-radius: 8px;
        font-weight: 800;
        margin-right: 20px;
      }
      .tag.quiz {
        background: var(--accent);
        color: #856404;
      }
      .tag.study {
        background: var(--border);
        color: var(--text-sub);
      }

      .task-date {
        color: var(--text-sub);
        font-weight: 600;
        margin-right: 15px;
        width: 75px;
      }
      .task-title {
        font-weight: 700;
        flex-grow: 1;
      }
      .arrow {
        color: var(--border);
        font-size: 1.2rem;
      }
    </style>
  </head>
  <body>
    <button class="theme-toggle" id="theme-btn">ğŸŒ“</button>

    <div class="container">
      <header>
        <h1>WEB ARCHIVE</h1>
        <p>ì˜¤ëŠ˜ë„ ì½”ë”© ì¤‘!</p>
      </header>

      <div id="loader" class="loader-wrapper">
        <div class="cloud">
          <div class="eyes">
            <div class="eye"></div>
            <div class="eye"></div>
          </div>
        </div>
        <div class="loading-text">íŒŒì¼ì„ ì°¾ìœ¼ëŸ¬ í•˜ëŠ˜ì„ ë‚ ê³  ìˆì–´ìš”!</div>
      </div>

      <div id="task-container" style="display: none"></div>
    </div>

    <script>
      // 1. ë‹¤í¬ëª¨ë“œ í† ê¸€ ë¡œì§
      const themeBtn = document.getElementById("theme-btn");
      const currentTheme = localStorage.getItem("theme");

      if (currentTheme) {
        document.documentElement.setAttribute("data-theme", currentTheme);
      }

      themeBtn.addEventListener("click", () => {
        let theme = document.documentElement.getAttribute("data-theme");
        if (theme === "dark") {
          document.documentElement.setAttribute("data-theme", "light");
          localStorage.setItem("theme", "light");
        } else {
          document.documentElement.setAttribute("data-theme", "dark");
          localStorage.setItem("theme", "dark");
        }
      });

      // 2. ë°ì´í„° í˜ì¹­ ë¡œì§
      async function fetchWeeklyData() {
        const owner = "khy0819";
        const repo = "Goormexp";
        const apiUrl = `https://api.github.com/repos/${owner}/${repo}/git/trees/main?recursive=1`;

        try {
          const res = await fetch(apiUrl);
          const data = await res.json();
          await new Promise((resolve) => setTimeout(resolve, 1500));

          const indexFiles = data.tree.filter(
            (f) =>
              f.path.includes("ê³¼ì œ/") &&
              f.path.endsWith("index.html") &&
              f.path !== "index.html",
          );

          const weeks = {};
          indexFiles.forEach((f) => {
            const pathParts = f.path.split("/");
            const weekFolder = pathParts.find((p) =>
              p.toLowerCase().includes("week"),
            );
            let weekLabel = weekFolder
              ? weekFolder.toUpperCase().replace(/_/g, " ")
              : "ê¸°íƒ€ ë¶„ë¥˜";
            let folderName = pathParts[pathParts.length - 2];
            if (!weeks[weekLabel]) weeks[weekLabel] = [];
            weeks[weekLabel].push({ path: f.path, name: folderName });
          });

          const container = document.getElementById("task-container");
          document.getElementById("loader").style.display = "none";
          container.style.display = "block";

          const sortedWeeks = Object.keys(weeks).sort((a, b) =>
            a.localeCompare(b, undefined, { numeric: true }),
          );

          sortedWeeks.forEach((week) => {
            const details = document.createElement("details");
            if (week === sortedWeeks[sortedWeeks.length - 1])
              details.open = true;

            let html = `<summary><span>ğŸ“‚ ${week}</span> <span style="font-size:0.8rem; opacity:0.4;">${weeks[week].length} Tasks</span></summary><div class="task-list">`;

            weeks[week]
              .sort((a, b) => a.name.localeCompare(b.name))
              .forEach((task) => {
                const parts = task.name.split("-");
                const datePart = parts[0] || "000000";
                let isQuiz = task.name.toUpperCase().includes("QUIZ");
                let tagText = isQuiz ? "QUIZ" : "STUDY";
                let tagClass = isQuiz ? "quiz" : "study";
                let titlePart =
                  parts.slice(2).join("-") || parts[1] || "ê³¼ì œë¬¼";
                titlePart = titlePart
                  .replace(/^(QUIZ|STUDY|TASK)[-_]?/i, "")
                  .trim();

                html += `
                <a href="${encodeURI(task.path)}" class="task-card">
                  <span class="tag ${tagClass}">${tagText}</span>
                  <span class="task-date">${datePart}</span>
                  <span class="task-title">${titlePart}</span>
                  <span class="arrow">â†’</span>
                </a>`;
              });
            html += `</div>`;
            details.innerHTML = html;
            container.appendChild(details);
          });
        } catch (e) {
          document.getElementById("loader").innerHTML =
            "â˜ï¸ ë¡œë“œ ì‹¤íŒ¨! ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
        }
      }
      fetchWeeklyData();
    </script>
  </body>
</html>
